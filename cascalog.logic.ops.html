<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>cascalog.logic.ops documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Cascalog-core 2.0.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="cascalog.api.html"><span>cascalog.api</span></a></li><li><a href="cascalog.cascading.conf.html"><span>cascalog.cascading.conf</span></a></li><li><a href="cascalog.cascading.flow.html"><span>cascalog.cascading.flow</span></a></li><li><a href="cascalog.cascading.io.html"><span>cascalog.cascading.io</span></a></li><li><a href="cascalog.cascading.operations.html"><span>cascalog.cascading.operations</span></a></li><li><a href="cascalog.cascading.platform.html"><span>cascalog.cascading.platform</span></a></li><li><a href="cascalog.cascading.tap.html"><span>cascalog.cascading.tap</span></a></li><li><a href="cascalog.cascading.types.html"><span>cascalog.cascading.types</span></a></li><li><a href="cascalog.cascading.util.html"><span>cascalog.cascading.util</span></a></li><li><a href="cascalog.logic.algebra.html"><span>cascalog.logic.algebra</span></a></li><li><a href="cascalog.logic.def.html"><span>cascalog.logic.def</span></a></li><li><a href="cascalog.logic.fn.html"><span>cascalog.logic.fn</span></a></li><li class="current"><a href="cascalog.logic.ops.html"><span>cascalog.logic.ops</span></a></li><li><a href="cascalog.logic.ops-impl.html"><span>cascalog.logic.ops-impl</span></a></li><li><a href="cascalog.logic.options.html"><span>cascalog.logic.options</span></a></li><li><a href="cascalog.logic.parse.html"><span>cascalog.logic.parse</span></a></li><li><a href="cascalog.logic.platform.html"><span>cascalog.logic.platform</span></a></li><li><a href="cascalog.logic.predicate.html"><span>cascalog.logic.predicate</span></a></li><li><a href="cascalog.logic.predmacro.html"><span>cascalog.logic.predmacro</span></a></li><li><a href="cascalog.logic.testing.html"><span>cascalog.logic.testing</span></a></li><li><a href="cascalog.logic.vars.html"><span>cascalog.logic.vars</span></a></li><li><a href="cascalog.logic.zip.html"><span>cascalog.logic.zip</span></a></li><li><a href="cascalog.playground.html"><span>cascalog.playground</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="cascalog.logic.ops.html#var-%21count"><span>!count</span></a></li><li><a href="cascalog.logic.ops.html#var-all"><span>all</span></a></li><li><a href="cascalog.logic.ops.html#var-any"><span>any</span></a></li><li><a href="cascalog.logic.ops.html#var-avg"><span>avg</span></a></li><li><a href="cascalog.logic.ops.html#var-comp"><span>comp</span></a></li><li><a href="cascalog.logic.ops.html#var-count"><span>count</span></a></li><li><a href="cascalog.logic.ops.html#var-distinct-count"><span>distinct-count</span></a></li><li><a href="cascalog.logic.ops.html#var-each"><span>each</span></a></li><li><a href="cascalog.logic.ops.html#var-first-n"><span>first-n</span></a></li><li><a href="cascalog.logic.ops.html#var-fixed-sample"><span>fixed-sample</span></a></li><li><a href="cascalog.logic.ops.html#var-fixed-sample-agg"><span>fixed-sample-agg</span></a></li><li><a href="cascalog.logic.ops.html#var-juxt"><span>juxt</span></a></li><li><a href="cascalog.logic.ops.html#var-lazy-generator"><span>lazy-generator</span></a></li><li><a href="cascalog.logic.ops.html#var-limit"><span>limit</span></a></li><li><a href="cascalog.logic.ops.html#var-limit-buffer"><span>limit-buffer</span></a></li><li><a href="cascalog.logic.ops.html#var-limit-combine"><span>limit-combine</span></a></li><li><a href="cascalog.logic.ops.html#var-limit-extract"><span>limit-extract</span></a></li><li><a href="cascalog.logic.ops.html#var-limit-init"><span>limit-init</span></a></li><li><a href="cascalog.logic.ops.html#var-limit-rank"><span>limit-rank</span></a></li><li><a href="cascalog.logic.ops.html#var-limit-rank-buffer"><span>limit-rank-buffer</span></a></li><li><a href="cascalog.logic.ops.html#var-max"><span>max</span></a></li><li><a href="cascalog.logic.ops.html#var-min"><span>min</span></a></li><li><a href="cascalog.logic.ops.html#var-negate"><span>negate</span></a></li><li><a href="cascalog.logic.ops.html#var-partial"><span>partial</span></a></li><li><a href="cascalog.logic.ops.html#var-re-parse"><span>re-parse</span></a></li><li><a href="cascalog.logic.ops.html#var-sum"><span>sum</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>cascalog.logic.ops documentation</h2><pre class="doc"></pre><div class="public" id="var-%21count"><h3>!count</h3><div class="usage"></div><pre class="doc"></pre></div><div class="public" id="var-all"><h3>all</h3><div class="usage"><code>(all &amp; ops)</code></div><pre class="doc">Accepts any number of filtering ops and returns a new op that
checks that every every one of the original filters passes. For
example:

((all #'even? #'positive? #'small?) ?x) ;; within some query

Is equivalent to:

;; within some query
(even? ?x :&gt; ?temp1)
(positive? ?x :&gt; ?temp2)
(small? ?x) :&gt; ?temp3)
(and ?temp1 ?temp2 ?temp3)</pre></div><div class="public" id="var-any"><h3>any</h3><div class="usage"><code>(any &amp; ops)</code></div><pre class="doc">Accepts any number of filtering ops and returns a new op that
checks that at least one of the original filters passes. For
example:

((any #'even? #'positive? #'small?) ?x) ;; within some query

Is equivalent to:

;; within some query
(even? ?x :&gt; ?temp1)
(positive? ?x :&gt; ?temp2)
(small? ?x :&gt; ?temp3)
(or ?temp1 ?temp2 ?temp3)</pre></div><div class="public" id="var-avg"><h3>avg</h3><div class="usage"></div><pre class="doc">Predicate operation that produces the average value of the
supplied input variable. For example:

(let [src [[1] [2]]]
  (&lt;- [?avg]
      (src ?x)
      (avg ?x :&gt; ?avg)))
;;=&gt; ([1.5])</pre></div><div class="public" id="var-comp"><h3>comp</h3><div class="usage"><code>(comp &amp; ops)</code></div><pre class="doc">Accepts any number of predicate ops and returns an op that is the
composition of those ops.

(require '[cascalog.ops :as c])
((c/comp #'str #'+) ?x ?y :&gt; ?sum-string) ;; within some query

Is equivalent to:

;; within some query
(+ ?x ?y :&gt; ?intermediate)
(str ?intermediate :&gt; ?sum-string)</pre></div><div class="public" id="var-count"><h3>count</h3><div class="usage"></div><pre class="doc"></pre></div><div class="public" id="var-distinct-count"><h3>distinct-count</h3><div class="usage"></div><pre class="doc">Predicate operation that produces a count of all distinct
values of the supplied input variable. For example:

(let [src [[1] [2] [2]]]
(&lt;- [?count]
    (src ?x)
    (distinct-count ?x :&gt; ?count)))
;;=&gt; ([2])</pre></div><div class="public" id="var-each"><h3>each</h3><div class="usage"><code>(each op)</code></div><pre class="doc">Accepts an operation and returns a predicate macro that maps `op`
across any number of input variables. For example:

((each #'str) ?x ?y ?z :&gt; ?x-str ?y-str ?z-str) ;; within some query

Is equivalent to

;; within some query
(str ?x :&gt; ?x-str)
(str ?y :&gt; ?y-str)
(str ?z :&gt; ?z-str)</pre></div><div class="public" id="var-first-n"><h3>first-n</h3><div class="usage"><code>(first-n gen n &amp; options__3658__auto__)</code></div><pre class="doc">Accepts a generator and a number `n` and returns a subquery that
 produces the first n elements from the supplied generator. Two
 boolean keyword arguments are supported:

:sort -- accepts a vector of variables on which to sort. Defaults to
         nil (unsorted).
:reverse -- If true, sorts items in reverse order. (false by default).

For example:

(def src [[1] [3] [2]]) ;; produces 3 tuples

;; produces ([1 2] [3 4] [2 3]) when executed
(def query (&lt;- [?x ?y] (src ?x) (inc ?x :&gt; ?y)))

;; produces ([3 4]) when executed
(first-n query 1 :sort [&quot;?x&quot;] :reverse true)</pre></div><div class="public" id="var-fixed-sample"><h3>fixed-sample</h3><div class="usage"><code>(fixed-sample gen n)</code></div><pre class="doc">Returns a subquery getting a random sample of n elements from the generator
</pre></div><div class="public" id="var-fixed-sample-agg"><h3>fixed-sample-agg</h3><div class="usage"><code>(fixed-sample-agg amt)</code></div><pre class="doc"></pre></div><div class="public" id="var-juxt"><h3>juxt</h3><div class="usage"><code>(juxt &amp; ops)</code></div><pre class="doc">Accepts any number of predicate ops and returns an op that is the
juxtaposition of those ops.

(require '[cascalog.ops :as c])
((c/juxt #'+ #'- #'&lt;) !x !y :&gt; !sum !diff !mult) ;; within some query

Is equivalent to:

;; within some query
(+ !x !y :&gt; !sum)
(- !x !y :&gt; !diff)
(* !x !y :&gt; !mult)</pre></div><div class="public" id="var-lazy-generator"><h3>lazy-generator</h3><div class="usage"><code>(lazy-generator tmp-path [tuple :as l-seq])</code></div><pre class="doc">Returns a cascalog generator on the supplied sequence of
tuples. `lazy-generator` serializes each item in the lazy sequence
into a sequencefile located at the supplied temporary directory and returns
a tap for the data in that directory.

It's recommended to wrap queries that use this tap with
`cascalog.cascading.io/with-fs-tmp`; for example,

  (with-fs-tmp [_ tmp-dir]
    (let [lazy-tap (lazy-generator tmp-dir lazy-seq)]
      (?&lt;- (stdout)
           [?field1 ?field2 ... etc]
           (lazy-tap ?field1 ?field2)
           ...)))</pre></div><div class="public" id="var-limit"><h3>limit</h3><div class="usage"><code>(limit n)</code></div><pre class="doc"></pre></div><div class="public" id="var-limit-buffer"><h3>limit-buffer</h3><div class="usage"><code>(limit-buffer n)</code></div><pre class="doc"></pre></div><div class="public" id="var-limit-combine"><h3>limit-combine</h3><div class="usage"><code>(limit-combine options n)</code></div><pre class="doc"></pre></div><div class="public" id="var-limit-extract"><h3>limit-extract</h3><div class="usage"><code>(limit-extract options n)</code></div><pre class="doc"></pre></div><div class="public" id="var-limit-init"><h3>limit-init</h3><div class="usage"><code>(limit-init sort-tuple &amp; tuple)</code></div><pre class="doc"></pre></div><div class="public" id="var-limit-rank"><h3>limit-rank</h3><div class="usage"><code>(limit-rank n)</code></div><pre class="doc"></pre></div><div class="public" id="var-limit-rank-buffer"><h3>limit-rank-buffer</h3><div class="usage"><code>(limit-rank-buffer n)</code></div><pre class="doc"></pre></div><div class="public" id="var-max"><h3>max</h3><div class="usage"></div><pre class="doc"></pre></div><div class="public" id="var-min"><h3>min</h3><div class="usage"></div><pre class="doc"></pre></div><div class="public" id="var-negate"><h3>negate</h3><div class="usage"><code>(negate op)</code></div><pre class="doc">Accepts a filtering op and returns an new op that acts as the
negation (or complement) of the original. For example:

((negate #'string?) ?string-var) ;; within some query

Is equivalent to

;; within some query
(string? ?string-var :&gt; ?temp-bool)
(not ?temp-bool)</pre></div><div class="public" id="var-partial"><h3>partial</h3><div class="usage"><code>(partial op &amp; args)</code></div><pre class="doc">Accepts an operation and fewer than normal arguments, and returns a
new operation that can be called with the remaining unspecified
args. For example, given this require and defmapop:

(require '[cascalog.logic.ops :as c])
(defmapop plus [x y] (+ x y))

The following two forms are equivalent:

(let [plus-10 (c/partial plus 10)]
   (&lt;- [?y] (src ?x) (plus-10 ?x :&gt; ?y)))

(&lt;- [?y] (src ?x) (plus-10 ?x :&gt; ?y))

With the benefit that `10` doesn't need to be hardcoded into the
first query.</pre></div><div class="public" id="var-re-parse"><h3>re-parse</h3><div class="usage"><code>(re-parse pattern)</code></div><pre class="doc">Accepts a regex `pattern` and a string argument `str` and returns
the groups within `str` that match the supplied `pattern`.</pre></div><div class="public" id="var-sum"><h3>sum</h3><div class="usage"></div><pre class="doc"></pre></div></div></body></html>